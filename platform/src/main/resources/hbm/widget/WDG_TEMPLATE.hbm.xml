<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
  <class entity-name="WdgTemplate" table="WDG_TEMPLATE">
    <cache usage="read-write" />
    <comment>模板控件</comment>

    <id name="widgetKey" type="java.lang.String">
      <column name="WIDGET_KEY" length="100" not-null="true">
        <comment>主键KEY</comment>
      </column>
    </id>

    <property name="busiName" type="java.lang.String">
      <column name="BUSI_NAME" length="200" not-null="true">
        <comment>展示名</comment>
      </column>
    </property>

    <!-- 保存字节流,符合filemanager规范 -->
    <!-- 文件最大10M -->
    <property name="templateFile" type="byte[]">
      <column name="TEMPLATE_FILE" length="10485760">
        <comment>模板文件</comment>
      </column>
    </property>

    <property name="updateDate" type="java.util.Date">
      <column name="UPDATE_DATE" length="23" not-null="true">
        <comment>更新时间</comment>
      </column>
    </property>

    <property name="createDate" type="java.util.Date">
      <column name="CREATE_DATE" length="23" not-null="true">
        <comment>创建时间</comment>
      </column>
    </property>
    
    <property name="createUid" type="java.lang.String">
      <column name="CREATE_UID" length="100" not-null="true">
        <comment>创建人</comment>
      </column>
    </property>

    <property name="description" type="java.lang.String">
      <column name="DESCRIPTION" length="500">
        <comment>描述</comment>
      </column>
    </property>

    <set name="vars" inverse="true" cascade="delete" lazy="false" order-by="sort asc">
      <cache usage="read-write" />
      <comment>展示变量</comment>
      <key>
        <column name="WIDGET_KEY" />
      </key>
      <one-to-many entity-name="WdgTemplateVar" />
    </set>
  </class>

  <!-- 变量 -->
  <class entity-name="WdgTemplateVar" table="WDG_TEMPLATE_VAR">
    <cache usage="read-write" />
    <comment>展示变量</comment>

    <id name="id" type="java.lang.Long">
      <column name="ID" length="12" not-null="true">
        <comment>自动主键</comment>
      </column>
      <generator class="increment"></generator>
    </id>

    <property name="widgetKey" type="java.lang.String">
      <column name="WIDGET_KEY" length="100" not-null="true">
        <comment>主键KEY</comment>
      </column>
    </property>

    <property name="execType" type="java.lang.Integer">
      <column name="EXEC_TYPE" length="8" not-null="true">
        <comment>脚本类型</comment>
      </column>
    </property>

    <property name="execScript" type="text">
      <column name="EXEC_SCRIPT" not-null="true">
        <comment>脚本</comment>
      </column>
    </property>

    <property name="description" type="java.lang.String">
      <column name="DESCRIPTION" length="500">
        <comment>描述</comment>
      </column>
    </property>

    <property name="var" type="java.lang.String">
      <column name="VAR" length="100" not-null="true">
        <comment>变量(别名)</comment>
      </column>
    </property>

    <property name="sort" type="java.lang.Integer">
      <column name="SORT" length="8" not-null="true">
        <comment>排序</comment>
      </column>
    </property>
  </class>
</hibernate-mapping>
